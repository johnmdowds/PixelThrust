<!-- Generated by SpecStory -->

# Implementing Fuel System and Thrust Effects (2025-05-10 22:20:42)

_**User**_

Thatâ€™s spot on â€” youâ€™re absolutely right! In Gravity Force 2, landing wasn't just for show â€” it refueled your ship, and often that was the only way to keep exploring. Destructible terrain, shooting, and physics puzzles were all built around that loop.

Letâ€™s start by implementing fuel consumption + refueling when landing, then add the flame and sound effect for thrust to bring it to life. Shooting and destructible terrain can come shortly after.

ðŸ”‹ Step 1: Fuel System with Refueling on Landing
âœ… Modify or replace PlayerController.cs with fuel logic:
csharp
Copy
Edit
using UnityEngine;
using UnityEngine.SceneManagement;

public class PlayerController : MonoBehaviour
{
    public float thrustForce = 5f;
    public float rotationSpeed = 200f;
    public Rigidbody2D rb;

    public float maxFuel = 100f;
    public float currentFuel;
    public float fuelConsumptionRate = 10f; // per second

    public ParticleSystem thrustEffect;
    public AudioSource thrustAudio;

    void Start()
    {
        currentFuel = maxFuel;
    }

    void Update()
    {
        float rotation = -Input.GetAxis("Horizontal") * rotationSpeed * Time.deltaTime;
        transform.Rotate(0, 0, rotation);

        if (Input.GetKey(KeyCode.Space) && currentFuel > 0)
        {
            rb.AddForce(transform.up * thrustForce);
            currentFuel -= fuelConsumptionRate * Time.deltaTime;

            if (thrustEffect && !thrustEffect.isPlaying)
                thrustEffect.Play();
            if (thrustAudio && !thrustAudio.isPlaying)
                thrustAudio.Play();
        }
        else
        {
            if (thrustEffect && thrustEffect.isPlaying)
                thrustEffect.Stop();
            if (thrustAudio && thrustAudio.isPlaying)
                thrustAudio.Stop();
        }

        // Clamp fuel to not go negative
        currentFuel = Mathf.Max(0, currentFuel);
    }

    public void Refuel()
    {
        currentFuel = maxFuel;
        Debug.Log("â›½ Refueled!");
    }
}
ðŸŸ§ Update LandingDetector.cs to refuel on soft landings:
csharp
Copy
Edit
void OnCollisionEnter2D(Collision2D collision)
{
    if (collision.gameObject.CompareTag("LandingPad"))
    {
        float landingSpeed = collision.relativeVelocity.magnitude;

        if (landingSpeed <= maxLandingSpeed)
        {
            Debug.Log("ðŸŸ¢ Landed safely!");
            FindObjectOfType<PlayerController>().Refuel();
        }
        else
        {
            Debug.Log("ðŸ’¥ Crash landing!");
            ReloadScene();
        }
    }
    else
    {
        Debug.Log("ðŸ’¥ Hit something hard!");
        ReloadScene();
    }
}
ðŸ”¥ Step 2: Add Flame & Audio to Thrust
âœ… 1. Particle System for Flame
Right-click Player â†’ Effects â†’ Particle System

Position it beneath the ship

Tweak it for a flame look:

Start Size: 0.2

Start Speed: 2

Color: Orange/yellow

Shape: Cone, pointing down

Drag it into the thrustEffect field on your PlayerController script

ðŸ”Š 2. Add Rocket Sound
Drag in a rocket loop sound (I can give you one or point you to a license-free one).

Add an Audio Source component to the Player

Set Loop = true, Play On Awake = false

Drag the Audio Source into thrustAudio on the PlayerController

Now your game has:

âœ… A fuel system

âœ… Refueling on soft landing

âœ… Flame + sound when thrusting

ðŸ§¨ Want to add shooting next? Or show fuel as a bar on-screen?
Also let me know if you want me to send over:

A custom flame particle prefab

A good license-free rocket sound effect

UI bar code for fuel display

---

_**Assistant**_

I'll help you implement the fuel system and thrust effects. Let's break this down into steps.

First, I'll update the `PlayerController.cs` with the fuel system and thrust effects:


---

```diff
      public float rotationSpeed = 200f;
      public Rigidbody2D rb;
+ 
+     [Header("Fuel System")]
+     public float maxFuel = 100f;
+     public float currentFuel;
+     public float fuelConsumptionRate = 10f; // per second
+ 
+     [Header("Effects")]
+     public ParticleSystem thrustEffect;
+     public AudioSource thrustAudio;
+ 
+     void Start()
+     {
+         currentFuel = maxFuel;
+     }
  
      void Update()
```

```diff
  
          // Thrust
-         if (Input.GetKey(KeyCode.Space))
+         if (Input.GetKey(KeyCode.Space) && currentFuel > 0)
          {
              rb.AddForce(transform.up * thrustForce);
-         }
+             currentFuel -= fuelConsumptionRate * Time.deltaTime;
+ 
+             // Play effects
+             if (thrustEffect && !thrustEffect.isPlaying)
+                 thrustEffect.Play();
+             if (thrustAudio && !thrustAudio.isPlaying)
+                 thrustAudio.Play();
+         }
+         else
+         {
+             // Stop effects
+             if (thrustEffect && thrustEffect.isPlaying)
+                 thrustEffect.Stop();
+             if (thrustAudio && thrustAudio.isPlaying)
+                 thrustAudio.Stop();
+         }
+ 
+         // Clamp fuel to not go negative
+         currentFuel = Mathf.Max(0, currentFuel);
+     }
+ 
+     public void Refuel()
+     {
+         currentFuel = maxFuel;
+         Debug.Log("â›½ Refueled!");
      }
  }
```

---

Now let's check if we have a `LandingDetector.cs` file to update with the refueling logic:


---

<details>
            <summary>Searched codebase "LandingDetector" â€¢ **0** results</summary>
        
No results found
</details>

---

I'll create the `LandingDetector.cs` file since it doesn't exist yet:


---

```diff
- 
+ using UnityEngine;
+ using UnityEngine.SceneManagement;
+ 
+ public class LandingDetector : MonoBehaviour
+ {
+     public float maxLandingSpeed = 5f;
+ 
+     void OnCollisionEnter2D(Collision2D collision)
+     {
+         if (collision.gameObject.CompareTag("LandingPad"))
+         {
+             float landingSpeed = collision.relativeVelocity.magnitude;
+ 
+             if (landingSpeed <= maxLandingSpeed)
+             {
+                 Debug.Log("ðŸŸ¢ Landed safely!");
+                 FindObjectOfType<PlayerController>().Refuel();
+             }
+             else
+             {
+                 Debug.Log("ðŸ’¥ Crash landing!");
+                 ReloadScene();
+             }
+         }
+         else
+         {
+             Debug.Log("ðŸ’¥ Hit something hard!");
+             ReloadScene();
+         }
+     }
+ 
+     void ReloadScene()
+     {
+         SceneManager.LoadScene(SceneManager.GetActiveScene().buildIndex);
+     }
+ } 
```

---

Great! I've implemented both the fuel system and landing detection. Here's what you need to do in Unity to set this up:

1. **Player Setup**:
   - Add the `LandingDetector` component to your player GameObject
   - Create a Particle System for the thrust effect:
     - Right-click Player â†’ Effects â†’ Particle System
     - Position it beneath the ship
     - Configure it for a flame look:
       - Start Size: 0.2
       - Start Speed: 2
       - Color: Orange/yellow
       - Shape: Cone, pointing down
   - Add an Audio Source component to the Player:
     - Set Loop = true
     - Set Play On Awake = false
   - Drag the Particle System into the `thrustEffect` field on PlayerController
   - Drag the Audio Source into the `thrustAudio` field on PlayerController

2. **Landing Pad Setup**:
   - Create a new GameObject for your landing pad
   - Add a Collider2D component to it
   - Tag it as "LandingPad" in the Inspector

The system now includes:
- âœ… Fuel consumption when thrusting
- âœ… Refueling on soft landings
- âœ… Visual flame effect when thrusting
- âœ… Audio support for thrust sound
- âœ… Crash detection and scene reloading

Would you like me to:
1. Add a UI fuel bar to display the current fuel level?
2. Help you set up the particle system with specific values?
3. Point you to some good license-free rocket sound effects?
4. Move on to implementing the shooting system?

Let me know what you'd like to tackle next!

---

